{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","src/scripts/animationInfo.js","src/scripts/app.js","src/scripts/body.js","src/scripts/bodypart.js","src/scripts/canvasdebugger.js","src/scripts/queue.js","src/scripts/stack.js"],"names":[],"mappings":"AAAA;;;;;;;ICAM,aAAa;AACP,UADN,aAAa,CACN,aAAa,EAAE;wBADtB,aAAa;;;AAGjB,MAAI,CAAC,QAAQ,GAAG,aAAa,CAAC,QAAQ,CAAC;EACvC;;cAJI,aAAa;;SAMU,sCAAC,OAAO,EAAE;AACrC,UAAO,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;GAC9B;;;SAE2B,sCAAC,OAAO,EAAE;AACrC,UAAO,IAAI,CAAC,MAAM,CAAC;GACnB;;;QAZI,aAAa;;;AAenB,MAAM,CAAC,OAAO,GAAG,aAAa,CAAC;;;;;ACf/B,IAAI,IAAI,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC7B,IAAI,cAAc,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC;;AAEjD,IAAI,SAAS,GAAG,MAAM,CAAC,SAAS,CAAC;AACjC,IAAI,GAAG,GAAG,QAAQ,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;;AAE9D,IAAI,OAAO,GAAG,IAAI,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC;AACvD,OAAO,CAAC,aAAa,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;AAC3C,OAAO,CAAC,eAAe,EAAE,CAAC;;AAE1B,GAAG,CAAC,SAAS,EAAE,CAAC;AAChB,KAAK,IAAI,CAAC,GAAG,GAAG,EAAE,CAAC,IAAI,GAAG,EAAE,CAAC,IAAE,EAAE,EAAE;AAClC,IAAG,CAAC,SAAS,EAAE,CAAC;AAChB,IAAG,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;AACnB,IAAG,CAAC,MAAM,CAAC,GAAG,EAAC,CAAC,CAAC,CAAC;AAClB,IAAG,CAAC,MAAM,EAAE,CAAC;;AAEb,IAAG,CAAC,SAAS,EAAE,CAAC;AAChB,IAAG,CAAC,MAAM,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;AACnB,IAAG,CAAC,MAAM,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;AACnB,IAAG,CAAC,MAAM,EAAE,CAAC;CACb;;AAED,GAAG,GAAG,cAAc,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC;AAC5C,UAAU,CAAC,YAAM;AAChB,QAAO,CAAC,WAAW,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;CAC5B,EAAE,IAAI,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1BT,IAAI,QAAQ,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC;AACrC,IAAI,KAAK,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;AAC/B,IAAI,KAAK,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;;IAEzB,IAAI;AACE,UADN,IAAI,CACG,IAAI,EAAE,gBAAgB,EAAE;wBAD/B,IAAI;;AAER,MAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AACjB,MAAI,CAAC,gBAAgB,GAAG,gBAAgB,CAAC;;;;AAIzC,MAAI,CAAC,IAAI,GAAG,IAAI,QAAQ,CAAC,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC;AACpE,MAAI,CAAC,WAAW,GAAG,IAAI,CAAC;AACxB,MAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;AACrB,MAAI,CAAC,OAAO,GAAG,IAAI,CAAC;AACpB,MAAI,CAAC,WAAW,EAAE,CAAC;EACnB;;cAZI,IAAI;;SAcE,uBAAG;AACb,OAAI,IAAI,GAAG,IAAI,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC;AACrE,OAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;;AAEzB,OAAI,KAAK,GAAG,IAAI,QAAQ,CAAC,OAAO,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC;AACzE,OAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;;;;;;;;AASrB,OAAI,OAAO,GAAG,IAAI,QAAQ,CAAC,UAAU,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC;AAC5E,QAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;;AAExB,OAAI,WAAW,GAAG,IAAI,QAAQ,CAAC,cAAc,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC;AACrF,UAAO,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;;;;;;;;;;;;;;AAgB9B,OAAI,SAAS,GAAG,IAAI,QAAQ,CAAC,YAAY,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC;AACjF,OAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;;;;;;;;;;;;;;;;GAiBzB;;;SAEU,qBAAC,EAAE,EAAE,wBAAwB,EAAE,uBAAuB,EAAE;AAClE,OAAI,CAAC,cAAc,CAAC,EAAE,EAAE,wBAAwB,EAAE,uBAAuB,CAAC,CAAC;GAC3E;;;SAEa,wBAAC,EAAE,EAAE,wBAAwB,EAAE,uBAAuB,EAAE;AACrE,OAAI,CAAC,YAAY,CAAC,EAAE,EAAE,IAAI,KAAK,EAAE,EAAE,wBAAwB,EAAE,uBAAuB,CAAC,CAAC;GACtF;;;SAEa,wBAAC,EAAE,EAAE,wBAAwB,EAAE,uBAAuB,EAAE;AACrE,OAAI,CAAC,YAAY,CAAC,EAAE,EAAE,IAAI,KAAK,EAAE,EAAE,wBAAwB,EAAE,uBAAuB,CAAC,CAAC;GACtF;;;SAEW,sBAAC,EAAE,EAAE,OAAO,EAAE,wBAAwB,EAAE,uBAAuB,EAAE;AAC5E,OAAI,QAAQ,GAAG,EAAE,CAAC;AAClB,UAAO,CAAC,KAAK,EAAE,CAAC;AAChB,UAAO,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACxB,KAAE,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;AACnC,OAAI,WAAW,CAAC;;AAEhB,UAAM,CAAC,WAAW,GAAG,OAAO,CAAC,GAAG,EAAE,CAAA,KAAM,SAAS,EAAE;AAClD,QAAI,wBAAwB,EAAE;AAC7B,6BAAwB,CAAC,WAAW,CAAC,CAAC;KACtC;;AAED,QAAI,WAAW,GAAG,WAAW,CAAC,OAAO,EAAE,CAAC;AACxC,QAAI,QAAQ,GAAG,WAAW,CAAC,WAAW,EAAE,CAAC;;AAGzC,SAAI,IAAI,KAAI,IAAI,QAAQ,EAAE;AACzB,SAAI,KAAK,GAAG,QAAQ,CAAC,KAAI,CAAC,CAAC;AAC3B,SAAI,CAAC,QAAQ,CAAC,KAAI,CAAC,EAAE;AACpB,cAAQ,CAAC,KAAI,CAAC,GAAG,IAAI,CAAC;AACtB,QAAE,CAAC,KAAK,EAAE,KAAI,CAAC,CAAC;AAChB,aAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;MACpB;KACD;;AAED,QAAI,uBAAuB,EAAE;AAC5B,4BAAuB,CAAC,WAAW,CAAC,CAAC;KACrC;IACD;AACD,UAAO,CAAC,KAAK,EAAE,CAAC;GAChB;;;SAEY,uBAAC,UAAU,EAAE;;;AACzB,OAAI,CAAC,WAAW,GAAG,UAAU,CAAC,WAAW,CAAC;AAC1C,OAAI,CAAC,QAAQ,GAAG,UAAU,CAAC,QAAQ,CAAC;AACpC,OAAI,CAAC,OAAO,GAAG,UAAU,CAAC,OAAO,CAAC;;AAElC,OAAI,CAAC,WAAW,CAAC,UAAC,IAAI,EAAE,IAAI,EAAK;AAChC,QAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE;;AAE7B,YAAO;KACP;AACD,QAAI,CAAC,iBAAiB,CAAC,MAAK,QAAQ,EAAE,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;IAC/D,CAAC,CAAC;GACH;;;SAEc,2BAAG;AACjB,OAAI,CAAC,WAAW,CAAC,UAAC,IAAI,EAAK;AAC1B,QAAI,CAAC,eAAe,EAAE,CAAC;IACvB,CAAC,CAAC;GACH;;;SAEkB,+BAAG;AACrB,OAAI,gBAAgB,GAAG,EAAE,CAAC;AAC1B,OAAI,CAAC,WAAW,CAAC,UAAC,IAAI,EAAE,IAAI,EAAK;AAChC,oBAAgB,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,mBAAmB,EAAE,CAAC;IACpD,CAAC,CAAC;AACH,UAAO,gBAAgB,CAAC;GACxB;;;SAEU,qBAAC,OAAO,EAAE,GAAG,EAAE;AACzB,MAAG,GAAG,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC;GAClC;;;SAEU,qBAAC,OAAO,EAAE,GAAG,EAAE;AACzB,MAAG,CAAC,IAAI,EAAE,CAAC;AACX,MAAG,CAAC,SAAS,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,CAAC;;AAElE,OAAI,CAAC,WAAW,CAAC,UAAC,IAAI,EAAE,IAAI,EAAK;AAChC,WAAO,CAAC,KAAK,iBAAe,IAAI,CAAG,CAAC;AACpC,QAAI,WAAW,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;;;AAGxC,eAAW,CAAC,OAAO,CAAC,UAAC,UAAU,EAAK;AACnC,YAAO,CAAC,KAAK,6BAA2B,IAAI,kBAAa,UAAU,CAAC,OAAO,EAAE,CAAG,CAAC;AACjF,QAAG,CAAC,IAAI,EAAE,CAAC;AACX,SAAI,SAAS,GAAG,UAAU,CAAC,mBAAmB,EAAE,CAAC,OAAO,CAAC,CAAC;AAC1D,QAAG,CAAC,MAAM,CAAC,AAAC,IAAI,CAAC,EAAE,GAAG,GAAG,GAAI,SAAS,CAAC,QAAQ,CAAC,CAAC;AACjD,QAAG,CAAC,SAAS,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;AAC5D,YAAO,CAAC,QAAQ,EAAE,CAAC;KACnB,CAAC,CAAC;;AAEH,OAAG,CAAC,IAAI,EAAE,CAAC;AACX,QAAI,SAAS,GAAG,IAAI,CAAC,mBAAmB,EAAE,CAAC,OAAO,CAAC,CAAC;;AAEpD,OAAG,CAAC,MAAM,CAAC,AAAC,IAAI,CAAC,EAAE,GAAG,GAAG,GAAI,SAAS,CAAC,QAAQ,CAAC,CAAC;AACjD,OAAG,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC;AAC1D,OAAG,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC;AAC3B,OAAG,CAAC,QAAQ,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;AACvF,OAAG,CAAC,OAAO,EAAE,CAAC;;;AAId,eAAW,CAAC,OAAO,CAAC,YAAM;AACzB,QAAG,CAAC,OAAO,EAAE,CAAC;KACd,CAAC,CAAC;AACH,WAAO,CAAC,QAAQ,EAAE,CAAC;IACnB,CAAC,CAAC;;AAEH,MAAG,CAAC,OAAO,EAAE,CAAC;;;;;;;;;;;;;;;;;;;;GAoBd;;;QAvMI,IAAI;;;AA0MV,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC;;;;;;;;;AC9MtB,IAAI,aAAa,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;;IAEzC,QAAQ;AACF,UADN,QAAQ,CACD,IAAI,EAAE,IAAI,EAAE,gBAAgB,EAAE,YAAY,EAAE,KAAK,EAAE;wBAD1D,QAAQ;;AAEZ,MAAI,CAAC,IAAI,GAAG,IAAI,CAAC;;AAEjB,MAAI,CAAC,IAAI,GAAG,IAAI,CAAC;;;AAGjB,MAAI,CAAC,gBAAgB,GAAG,gBAAgB,CAAC;;;AAGzC,MAAI,CAAC,YAAY,GAAG,YAAY,CAAC;;AAEjC,MAAI,CAAC,KAAK,GAAG,KAAK,CAAC;;AAEnB,MAAI,CAAC,MAAM,GAAG,IAAI,CAAC;AACnB,MAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;;AAEnB,MAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAC1B,MAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;AAC3B,MAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;EAClB;;cApBI,QAAQ;;SAsBJ,mBAAC,MAAM,EAAE;AACjB,OAAI,CAAC,MAAM,GAAG,MAAM,CAAC;GACrB;;;;;SAGQ,qBAAG;AACX,UAAO,IAAI,CAAC,MAAM,CAAC;GACnB;;;SAEM,mBAAG;AACT,UAAO,IAAI,CAAC,IAAI,CAAC;GACjB;;;SAEU,uBAAG;AACb,UAAO,IAAI,CAAC,QAAQ,CAAC;GACrB;;;SAEa,wBAAC,IAAI,EAAE;AACpB,UAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;GAC3B;;;SAEO,kBAAC,KAAK,EAAE;AACf,OAAI,SAAS,GAAG,KAAK,CAAC,OAAO,EAAE,CAAC;AAChC,QAAK,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;AACtB,OAAI,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE;AAC7B,QAAI,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;AACxC,QAAI,WAAW,GAAG,QAAQ,CAAC,sBAAsB,EAAE,CAAA;AACnD,UAAM,IAAI,KAAK,0BAAuB,IAAI,CAAC,IAAI,gDAAyC,SAAS,YAAM,WAAW,CAAG,CAAC;IACtH;AACD,OAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,GAAG,KAAK,CAAC;GACjC;;;SAEa,0BAAG;AAChB,OAAI,KAAK,GAAG,EAAE,CAAC;AACf,OAAI,WAAW,GAAG,IAAI,CAAC;AACvB,UAAO,WAAW,GAAG,WAAW,CAAC,SAAS,EAAE,EAAE;AAC7C,SAAK,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;IAC3B;;AAED,UAAO,KAAK,CAAC;GACb;;;SAEqB,kCAAG;AACxB,OAAI,WAAW,GAAG,EAAE,CAAC;AACrB,OAAI,WAAW,GAAG,IAAI,CAAC;AACvB,MAAG;AACF,eAAW,CAAC,OAAO,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC,CAAC;IAC3C,QAAQ,WAAW,GAAG,WAAW,CAAC,SAAS,EAAE,EAAE;;AAEhD,UAAO,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;GAChC;;;SAEe,4BAAG;AAClB,UAAO,IAAI,CAAC,aAAa,CAAC;GAC1B;;;SAEgB,2BAAC,QAAQ,EAAE,aAAa,EAAE;AAC1C,OAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;AACzB,OAAI,CAAC,aAAa,GAAG,IAAI,aAAa,CAAC,aAAa,CAAC,CAAC;GACtD;;;SAEkB,+BAAG;AACrB,UAAO,IAAI,CAAC,gBAAgB,CAAC;GAC7B;;;SAEc,2BAAG;AACjB,QAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC,EAAE,EAAE;;AAEtC,QAAI,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,4BAA4B,CAAC,CAAC,CAAC,CAAC;AACvE,QAAI,gBAAgB,GAAG,IAAI,CAAC,gBAAgB,CAAC;;AAE7C,QAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,GAAG;AAC1B,eAAU,EAAE,gBAAgB;AAC5B,eAAU,EAAE,aAAa;KACzB,CAAC;IACF;GACD;;;SAEkB,6BAAC,OAAO,EAAE;AAC5B,UAAO;AACN,cAAU,EAAE,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,OAAO,CAAC;AACnD,cAAU,EAAE,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,OAAO,CAAC;IACnD,CAAA;GACD;;;QAzGI,QAAQ;;;AA2Gd,MAAM,CAAC,OAAO,GAAG,QAAQ,CAAC;;;;;AC7G1B,IAAI,cAAc,GAAG;AACpB,kBAAiB,EAAE,2BAAC,GAAG,EAAK;;;AAG3B,MAAI,IAAI,GAAG,GAAG,CAAC;AACf,KAAG,GAAG,EAAE,CAAC;;AAET,MAAI,aAAa,GAAG,CAAC,WAAW,CAAC,CAAC;AAClC,eAAa,CAAC,OAAO,CAAC,UAAC,QAAQ,EAAK;AACnC,SAAM,CAAC,cAAc,CAAC,GAAG,EAAE,QAAQ,EAAE;AACpC,OAAG,EAAE,aAAS,KAAK,EAAE;AACnB,SAAI,CAAC,QAAQ,CAAC,GAAG,KAAK,CAAC;AACxB,YAAO,CAAC,GAAG,UAAQ,QAAQ,gBAAW,KAAK,CAAG,CAAC;KAC/C;IACD,CAAC,CAAC;GACH,CAAC,CAAC;;AAEH,MAAI,WAAW,GAAG,CACjB,MAAM,EAAE,SAAS,EAAE,WAAW,EAAE,QAAQ,EAAE,UAAU,CAAC,CAAC;AACvD,aAAW,CAAC,OAAO,CAAC,UAAC,MAAM,EAAK;AAC/B,MAAG,CAAC,MAAM,CAAC,GAAG,YAAa;sCAAT,IAAI;AAAJ,SAAI;;;AACpB,WAAO,CAAC,GAAG,CAAC,MAAM,GAAG,MAAM,EAAE,IAAI,CAAC,CAAC;AACnC,QAAI,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;IAChC,CAAC;GACF,CAAC,CAAC;AACH,SAAO,GAAG,CAAC;EACX;CACD,CAAA;;AAED,MAAM,CAAC,OAAO,GAAG,cAAc,CAAC;;;;;;;;;IC7B1B,KAAK;AACC,UADN,KAAK,CACE,KAAK,EAAE,MAAM,EAAE;wBADtB,KAAK;;AAET,MAAI,CAAC,GAAG,GAAG,EAAE,CAAC;AACd,MAAI,CAAC,KAAK,GAAG,KAAK,CAAC;AACnB,MAAI,CAAC,MAAM,GAAG,MAAM,CAAC;EACrB;;cALI,KAAK;;SAON,cAAC,IAAI,EAAE;AACV,OAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACpB,OAAI,IAAI,CAAC,MAAM,EAAE;AAChB,QAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;IAClB;GACD;;;SAEE,eAAG;AACL,OAAI,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC;AAC5B,OAAI,IAAI,CAAC,KAAK,EAAE;AACf,QAAI,CAAC,KAAK,EAAE,CAAC;IACb;AACD,UAAO,IAAI,CAAC;GACZ;;;SAEI,iBAAG;AACP,OAAI,CAAC,GAAG,CAAC,MAAM,GAAG,CAAC,CAAC;GACpB;;;QAxBI,KAAK;;;AA0BX,MAAM,CAAC,OAAO,GAAG,KAAK,CAAC;;;;;;;;;IC1BjB,KAAK;AACC,UADN,KAAK,CACE,KAAK,EAAE,MAAM,EAAE;wBADtB,KAAK;;AAET,MAAI,CAAC,GAAG,GAAG,EAAE,CAAC;AACd,MAAI,CAAC,KAAK,GAAG,KAAK,CAAC;AACnB,MAAI,CAAC,MAAM,GAAG,MAAM,CAAC;EACrB;;cALI,KAAK;;SAON,cAAC,IAAI,EAAE;AACV,OAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACpB,OAAI,IAAI,CAAC,MAAM,EAAE;AAChB,QAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;IAClB;GACD;;;SAEE,eAAG;AACL,OAAI,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;AAC1B,OAAI,IAAI,CAAC,KAAK,EAAE;AACf,QAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;IACjB;AACD,UAAO,IAAI,CAAC;GACZ;;;SAEI,iBAAG;AACP,OAAI,CAAC,GAAG,CAAC,MAAM,GAAG,CAAC,CAAC;GACpB;;;QAxBI,KAAK;;;AA0BX,MAAM,CAAC,OAAO,GAAG,KAAK,CAAC","file":"app.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","class AnimationInfo {\n\tconstructor(animationInfo) {\n\t\t// this.source = animationInfo.source;\n\t\tthis.rotation = animationInfo.rotation;\n\t}\n\n\tgetInterpolatedLocalRotation(frameId) {\n\t\treturn this.rotation[frameId];\n\t}\n\n\tgetInterpolatedLocalPosition(frameId) {\n\t\treturn this.center;\n\t}\n}\n\nmodule.exports = AnimationInfo;","let Body = require('./body');\nlet CanvasDebugger = require('./canvasdebugger');\n\nlet appConfig = window.appConfig;\nlet ctx = document.getElementById('manikin').getContext('2d');\n\nlet manikin = new Body(appConfig.bodyName, [300, 300]);\nmanikin.loadAnimation(appConfig.animation);\nmanikin.calculateFrames();\n\nctx.beginPath();\nfor (let i = 200; i <= 400; i+=10) {\n\tctx.beginPath();\n\tctx.moveTo(200, i);\n\tctx.lineTo(400,i);\n\tctx.stroke();\n\n\tctx.beginPath();\n\tctx.moveTo(i, 200);\n\tctx.lineTo(i, 400);\n\tctx.stroke();\n}\n\nctx = CanvasDebugger.instrumentContext(ctx);\nsetTimeout(() => {\n\tmanikin.renderFrame(0, ctx);\n}, 2000);\n\n// manikin.forEachPart((part, name) => {\n// \tconsole.log(`Part '${name}'`, part, part.getFrameInfo());\n// });\n\n// let calculatedFrames = manikin.getCalculatedFrames();\n// let expectedCalculatedFrames = {\n// \t'root': {\n// \t\t0: {\n// \t\t\t'rotation': 0\n// \t\t}\n// \t},\n// \t'hips': {\n// \t\t0: {\n// \t\t\t'rotation': 20\n// \t\t}\n// \t},\n// \t'torso': {\n// \t\t0: {\n// \t\t\t'rotation': 20\n// \t\t}\n// \t},\t\n// \t'thigh-left': {\n// \t\t0: {\n// \t\t\t'rotation': -5\n// \t\t}\n// \t},\n// \t'arm-left': {\n// \t\t0: {\n// \t\t\t'rotation': 55\n// \t\t}\n// \t},\n// \t'forearm-left': {\n// \t\t0: {\n// \t\t\t'rotation': 100\n// \t\t}\n// \t},\n// };\n\n// for (let partName in expectedCalculatedFrames) {\n// \tlet got = calculatedFrames[partName][0];\n// \tlet expected = expectedCalculatedFrames[partName][0];\n\n// \tif (got.position[0] != expected.position[0] || got.position[1] != expected.position[1]) {\n// \t\tconsole.error(`Position for ${partName} does is incorrect.`, 'Got:', got.position, 'expected:', expected.position);\n// \t}\n// \tif (got.rotation != expected.rotation) {\n// \t\tconsole.error(`Rotation for ${partName} does is incorrect.`, 'Got:', got.rotation, 'expected:', expected.rotation);\n// \t}\n// }\n// console.log('Done testing');","let BodyPart = require('./bodypart');\nlet Queue = require('./queue');\nlet Stack = require('./stack');\n\nclass Body {\n\tconstructor(name, absolutePosition) {\n\t\tthis.name = name;\n\t\tthis.absolutePosition = absolutePosition;\n\n\t\t// TODO: create a frame information object to pass around\n\n\t\tthis.root = new BodyPart('root', [0, 0], [0, 0], [0, 0], '#000000');\n\t\tthis.spritesheet = null;\n\t\tthis.duration = null;\n\t\tthis.looping = null;\n\t\tthis.createParts();\n\t}\n\n\tcreateParts() {\n\t\tlet hips = new BodyPart('hips', [20, 20], [0, 0], [0, 0], '#ff0000');\n\t\tthis.root.addChild(hips);\n\n\t\tlet torso = new BodyPart('torso', [20, 60], [0, -60], [0, 0], '#00ff00');\n\t\thips.addChild(torso);\n\n\t\t// let neck = new BodyPart('neck');\n\t\t// torso.addChild(neck);\n\n\t\t// let head = new BodyPart('head');\n\t\t// neck.addChild(head);\n\n\n\t\tlet leftArm = new BodyPart('arm-left', [10, 35], [5, 0], [0, 0], '#0000ff');\n\t\ttorso.addChild(leftArm);\n\n\t\tlet leftForeArm = new BodyPart('forearm-left', [10, 35], [0, 35], [0, 0], '#ffff00');\n\t\tleftArm.addChild(leftForeArm);\n\n\t\t// let leftHand = new BodyPart('hand-left');\n\t\t// leftForeArm.addChild(leftHand);\n\n\n\t\t// let rightArm = new BodyPart('arm-right');\n\t\t// torso.addChild(rightArm);\n\n\t\t// let rightForeArm = new BodyPart('forearm-right');\n\t\t// rightArm.addChild(rightForeArm);\n\n\t\t// let rightHand = new BodyPart('hand-right');\n\t\t// rightForeArm.addChild(rightHand);\n\n\n\t\tlet leftThigh = new BodyPart('thigh-left', [20, 50], [0, 20], [0, 0], '#ff00ff');\n\t\thips.addChild(leftThigh);\n\n\t\t// let leftLeg = new BodyPart('leg-left');\n\t\t// leftThigh.addChild(leftLeg);\n\n\t\t// let leftFoot = new BodyPart('foot-left');\n\t\t// leftLeg.addChild(leftFoot);\n\n\n\t\t// let rightThigh = new BodyPart('thigh-right');\n\t\t// hips.addChild(rightThigh);\n\n\t\t// let rightLeg = new BodyPart('leg-right');\n\t\t// leftThigh.addChild(rightLeg);\n\n\t\t// let rightFoot = new BodyPart('foot-right');\n\t\t// rightLeg.addChild(rightFoot);\n\t}\n\n\tforEachPart(fn, beforeLoopOverChildrenFn, afterLoopOverChildrenFn) {\n\t\tthis.forEachPartDFS(fn, beforeLoopOverChildrenFn, afterLoopOverChildrenFn);\n\t}\n\n\tforEachPartDFS(fn, beforeLoopOverChildrenFn, afterLoopOverChildrenFn) {\n\t\tthis._forEachPart(fn, new Stack(), beforeLoopOverChildrenFn, afterLoopOverChildrenFn);\n\t}\n\n\tforEachPartBFS(fn, beforeLoopOverChildrenFn, afterLoopOverChildrenFn) {\n\t\tthis._forEachPart(fn, new Queue(), beforeLoopOverChildrenFn, afterLoopOverChildrenFn);\n\t}\n\n\t_forEachPart(fn, storage, beforeLoopOverChildrenFn, afterLoopOverChildrenFn) {\n\t\tvar explored = [];\n\t\tstorage.flush();\n\t\tstorage.push(this.root);\n\t\tfn(this.root, this.root.getName());\n\t\tvar currentPart;\n\n\t\twhile((currentPart = storage.pop()) !== undefined) {\n\t\t\tif (beforeLoopOverChildrenFn) {\n\t\t\t\tbeforeLoopOverChildrenFn(currentPart);\n\t\t\t}\n\n\t\t\tlet currentName = currentPart.getName();\n\t\t\tlet children = currentPart.getChildren();\n\n\n\t\t\tfor(let name in children) {\n\t\t\t\tlet child = children[name];\n\t\t\t\tif (!explored[name]) {\n\t\t\t\t\texplored[name] = true;\n\t\t\t\t\tfn(child, name);\n\t\t\t\t\tstorage.push(child);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (afterLoopOverChildrenFn) {\n\t\t\t\tafterLoopOverChildrenFn(currentPart);\n\t\t\t}\n\t\t}\n\t\tstorage.flush();\n\t}\n\n\tloadAnimation(animObject) {\n\t\tthis.spritesheet = animObject.spritesheet;\n\t\tthis.duration = animObject.duration;\n\t\tthis.looping = animObject.looping;\n\n\t\tthis.forEachPart((part, name) => {\n\t\t\tif (!animObject.frames[name]) {\n\t\t\t\t//throw new Error(`No frame info for body part ${name} in animation object:`, animObject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tpart.loadAnimationInfo(this.duration, animObject.frames[name]);\n\t\t});\n\t}\n\n\tcalculateFrames() {\n\t\tthis.forEachPart((part) => {\n\t\t\tpart.calculateFrames();\n\t\t});\n\t}\n\n\tgetCalculatedFrames() {\n\t\tlet calculatedFrames = {};\n\t\tthis.forEachPart((part, name) => {\n\t\t\tcalculatedFrames[name] = part.getCalculatedFrames();\n\t\t});\n\t\treturn calculatedFrames;\n\t}\n\n\trenderFrame(frameId, ctx) {\n\t\tctx = this.instrumentContext(ctx);\n\t}\n\n\trenderFrame(frameId, ctx) {\n\t\tctx.save();\n\t\tctx.translate(this.absolutePosition[0], this.absolutePosition[1]);\n\n\t\tthis.forEachPart((part, name) => {\n\t\t\tconsole.group(`looping on ${name}`);\n\t\t\tlet parentParts = part.getParentChain();\n\n\t\t\t// Get us into a state where everything is local to 'part'.\n\t\t\tparentParts.forEach((parentPart) => {\n\t\t\t\tconsole.group(`loop for transforms to ${name}, parent: ${parentPart.getName()}`);\n\t\t\t\tctx.save();\n\t\t\t\tlet frameInfo = parentPart.getCalculatedFrames()[frameId];\n\t\t\t\tctx.rotate((Math.PI / 180) * frameInfo.rotation);\n\t\t\t\tctx.translate(frameInfo.position[0], frameInfo.position[1]);\n\t\t\t\tconsole.groupEnd();\n\t\t\t});\n\n\t\t\tctx.save();\n\t\t\tlet frameInfo = part.getCalculatedFrames()[frameId];\n\t\t\t// Need to translate again, to position ourselves over the center of rotation.\n\t\t\tctx.rotate((Math.PI / 180) * frameInfo.rotation);\n\t\t\tctx.translate(part.centerOffset[0], part.centerOffset[1]);\n\t\t\tctx.fillStyle = part.color;\n\t\t\tctx.fillRect(frameInfo.position[0], frameInfo.position[1], part.size[0], part.size[1]);\n\t\t\tctx.restore();\n\n\n\t\t\t// Go back to previous context.\n\t\t\tparentParts.forEach(() => {\n\t\t\t\tctx.restore();\n\t\t\t});\n\t\t\tconsole.groupEnd();\n\t\t});\n\t\t\n\t\tctx.restore();\n\n\t\t// let beforeFn = function(part) {\n\t\t// \tlet frameInfo = part.getCalculatedFrames()[frameId];\n\t\t// \tctx.translate(part.centerOffset[0], part.centerOffset[1]);\n\t\t// \tctx.rotate((Math.PI / 180) * frameInfo.rotation);\n\t\t// \tctx.save();\n\t\t// }\n\n\t\t// let afterFn = function(part) {\n\t\t// \tctx.restore();\n\t\t// }\n\n\t\t// this.forEachPart((part, name) => {\n\t\t// \tlet frameInfo = part.getCalculatedFrames()[frameId];\n\t\t// \tctx.save();\n\t\t// \tctx.fillStyle = part.color;\n\t\t// \tctx.fillRect(frameInfo.absolutePosition[0], frameInfo.absolutePosition[1], part.size[0], part.size[1]);\n\t\t// \tctx.restore();\n\t\t// }, beforeFn, afterFn);\n\t}\n}\n\nmodule.exports = Body;","let AnimationInfo = require('./animationInfo');\n\nclass BodyPart {\n\tconstructor(name, size, relativePosition, centerOffset, color) {\n\t\tthis.name = name;\n\t\t// Dimensions of the body part.\n\t\tthis.size = size;\n\n\t\t// Vector going from parent to this part.\n\t\tthis.relativePosition = relativePosition;\n\n\t\t// Offset to allow parts to rotate around the joints.\n\t\tthis.centerOffset = centerOffset;\n\n\t\tthis.color = color;\n\t\t\n\t\tthis.parent = null;\n\t\tthis.children = {};\n\t\t\n\t\tthis.animationInfo = null;\n\t\tthis.calculatedFrames = {};\n\t\tthis.duration = 0;\n\t}\n\n\tsetParent(parent) {\n\t\tthis.parent = parent;\n\t}\n\n\t// Look into ES6 setters/getters\n\tgetParent() {\n\t\treturn this.parent;\n\t}\n\n\tgetName() {\n\t\treturn this.name;\n\t}\n\n\tgetChildren() {\n\t\treturn this.children;\n\t}\n\n\tgetChildByName(name) {\n\t\treturn this.children[name];\n\t}\n\n\taddChild(child) {\n\t\tlet childName = child.getName();\n\t\tchild.setParent(this);\n\t\tif (this.children[childName]) {\n\t\t\tlet existing = this.children[childName];\n\t\t\tlet parentChain = existing.getParentChainAsString()\n\t\t\tthrow new Error(`Cannot add child: '${this.name}' already has a child by the name of '${childName}': ${parentChain}`);\n\t\t}\n\t\tthis.children[childName] = child;\n\t}\n\n\tgetParentChain() {\n\t\tlet chain = [];\n\t\tlet currentPart = this;\n\t\twhile (currentPart = currentPart.getParent()) {\n\t\t\tchain.unshift(currentPart);\n\t\t}\n\n\t\treturn chain;\n\t}\n\n\tgetParentChainAsString() {\n\t\tlet stringParts = [];\n\t\tlet currentPart = this;\n\t\tdo {\n\t\t\tstringParts.unshift(currentPart.getName());\n\t\t} while (currentPart = currentPart.getParent());\n\n\t\treturn stringParts.join(' -> ');\n\t}\n\n\tgetAnimationInfo() {\n\t\treturn this.animationInfo;\n\t}\n\n\tloadAnimationInfo(duration, animationInfo) {\n\t\tthis.duration = duration;\n\t\tthis.animationInfo = new AnimationInfo(animationInfo);\n\t}\n\n\tgetCalculatedFrames() {\n\t\treturn this.calculatedFrames;\n\t}\n\n\tcalculateFrames() {\n\t\tfor(let f = 0; f < this.duration; f++) {\n\n\t\t\tlet localRotation = this.animationInfo.getInterpolatedLocalRotation(f);\n\t\t\tlet relativePosition = this.relativePosition;\n\n\t\t\tthis.calculatedFrames[f] = {\n\t\t\t\t'position': relativePosition,\n\t\t\t\t'rotation': localRotation\n\t\t\t};\n\t\t}\n\t}\n\n\tgetDrawInfoForFrame(frameId) {\n\t\treturn {\n\t\t\t'position': this.calculatedFrames.position[frameId],\n\t\t\t'rotation': this.calculatedFrames.rotation[frameId]\n\t\t}\n\t}\n}\nmodule.exports = BodyPart;","let CanvasDebugger = {\n\tinstrumentContext: (ctx) => {\n\t\t// Substitute the original object with our proxy,\n\t\t// We'll return the proxy at the end of the function.\n\t\tlet _ctx = ctx;\n\t\tctx = {};\n\t\t\n\t\tlet propWhitelist = ['fillStyle'];\n\t\tpropWhitelist.forEach((propName) => {\n\t\t\tObject.defineProperty(ctx, propName, {\n\t\t\t\tset: function(value) {\n\t\t\t\t \t_ctx[propName] = value;\n\t\t\t\t\tconsole.log(`ctx.${propName} set to ${value}`);\n\t\t\t\t}\t\t  \n\t\t\t});    \n\t\t});\n\n\t\tlet fnWhitelist = [\n\t\t\t'save', 'restore', 'translate',\t'rotate', 'fillRect'];\n\t\tfnWhitelist.forEach((fnName) => {\n\t\t\tctx[fnName] = (...args) => {\n\t\t\t  console.log('ctx.' + fnName, args);  \n\t\t\t  _ctx[fnName].apply(_ctx, args);\n\t\t\t};\n\t\t});\n\t\treturn ctx;\n\t}\n}\n\nmodule.exports = CanvasDebugger;","class Queue {\n\tconstructor(onpop, onpush) {\n\t\tthis.arr = [];\n\t\tthis.onpop = onpop;\n\t\tthis.onpush = onpush;\n\t}\n\n\tpush(node) {\n\t\tthis.arr.push(node);\n\t\tif (this.onpush) {\n\t\t\tthis.onpush(node);\n\t\t}\n\t}\n\n\tpop() {\n\t\tvar node = this.arr.shift();\n\t\tif (this.onpop) {\n\t\t\tthis.onpop();\n\t\t}\n\t\treturn node;\n\t}\n\n\tflush() {\n\t\tthis.arr.length = 0;\n\t}\n}\nmodule.exports = Queue;","class Stack {\n\tconstructor(onpop, onpush) {\n\t\tthis.arr = [];\n\t\tthis.onpop = onpop;\n\t\tthis.onpush = onpush;\t\t\n\t}\n\n\tpush(node) {\n\t\tthis.arr.push(node);\n\t\tif (this.onpush) {\n\t\t\tthis.onpush(node);\n\t\t}\n\t}\n\n\tpop() {\n\t\tvar node = this.arr.pop();\n\t\tif (this.onpop) {\n\t\t\tthis.onpop(node);\n\t\t}\n\t\treturn node;\n\t}\n\n\tflush() {\n\t\tthis.arr.length = 0;\n\t}\n}\nmodule.exports = Stack;"]}