{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","src/scripts/animationInfo.js","src/scripts/app.js","src/scripts/body.js","src/scripts/bodypart.js","src/scripts/queue.js"],"names":[],"mappings":"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","file":"app.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","class AnimationInfo {\n\tconstructor(animationInfo) {\n\t\t// this.source = animationInfo.source;\n\t\tthis.center = animationInfo.center;\n\t\tthis.rotation = animationInfo.rotation;\n\t}\n\n\tgetInterpolatedLocalRotation(frameId) {\n\t\treturn this.rotation[frameId];\n\t}\n\n\tgetInterpolatedLocalPosition(frameId) {\n\t\treturn this.center;\n\t}\n}\n\nmodule.exports = AnimationInfo;","let Body = require('./body');\n\nlet appConfig = window.appConfig;\n\nlet manikin = new Body(appConfig.bodyName);\nmanikin.loadAnimation(appConfig.animation);\nmanikin.calculateFrames();\n\n// manikin.forEachPart((part, name) => {\n// \tconsole.log(`Part '${name}'`, part, part.getFrameInfo());\n// });\n\nlet calculatedFrames = manikin.getCalculatedFrames();\nlet expectedCalculatedFrames = {\n\t'root': {\n\t\t0: {\n\t\t\t'position': [3, 5],\n\t\t\t'rotation': 0\n\t\t}\n\t},\n\t'hips': {\n\t\t0: {\n\t\t\t'position': [3, 5],\n\t\t\t'rotation': 20\n\t\t}\n\t},\n\t'torso': {\n\t\t0: {\n\t\t\t'position': [3, 5],\n\t\t\t'rotation': 20\n\t\t}\n\t},\t\n\t'thigh-left': {\n\t\t0: {\n\t\t\t'position': [3, 5],\n\t\t\t'rotation': -5\n\t\t}\n\t},\n\t'arm-left': {\n\t\t0: {\n\t\t\t'position': [3, 5],\n\t\t\t'rotation': 55\n\t\t}\n\t},\n\t'forearm-left': {\n\t\t0: {\n\t\t\t'position': [3, 5],\n\t\t\t'rotation': 100\n\t\t}\n\t},\n};\n\nfor (let partName in expectedCalculatedFrames) {\n\tlet got = calculatedFrames[partName][0];\n\tlet expected = expectedCalculatedFrames[partName][0];\n\n\tif (got.position[0] != expected.position[0] || got.position[1] != expected.position[1]) {\n\t\tconsole.error(`Position for ${partName} does is incorrect.`, 'Got:', got.position, 'expected:', expected.position);\n\t}\n\tif (got.rotation != expected.rotation) {\n\t\tconsole.error(`Rotation for ${partName} does is incorrect.`, 'Got:', got.rotation, 'expected:', expected.rotation);\n\t}\n}\nconsole.log('Done testing');","let BodyPart = require('./bodypart');\nlet Queue = require('./queue');\n\nclass Body {\n\tconstructor(name, queue) {\n\t\tthis.name = name;\n\t\tthis.queue = new Queue();\n\n\t\t// TODO: create a frame information object to pass around\n\n\t\tthis.root = new BodyPart('root');\n\t\tthis.spritesheet = null;\n\t\tthis.duration = null;\n\t\tthis.looping = null;\n\t\tthis.createParts();\n\t}\n\n\tcreateParts() {\n\t\tlet hips = new BodyPart('hips');\n\t\tthis.root.addChild(hips);\n\n\t\tlet torso = new BodyPart('torso');\n\t\thips.addChild(torso);\n\n\t\t// let neck = new BodyPart('neck');\n\t\t// torso.addChild(neck);\n\n\t\t// let head = new BodyPart('head');\n\t\t// neck.addChild(head);\n\n\n\t\tlet leftArm = new BodyPart('arm-left');\n\t\ttorso.addChild(leftArm);\n\n\t\tlet leftForeArm = new BodyPart('forearm-left');\n\t\tleftArm.addChild(leftForeArm);\n\n\t\t// let leftHand = new BodyPart('hand-left');\n\t\t// leftForeArm.addChild(leftHand);\n\n\n\t\t// let rightArm = new BodyPart('arm-right');\n\t\t// torso.addChild(rightArm);\n\n\t\t// let rightForeArm = new BodyPart('forearm-right');\n\t\t// rightArm.addChild(rightForeArm);\n\n\t\t// let rightHand = new BodyPart('hand-right');\n\t\t// rightForeArm.addChild(rightHand);\n\n\n\t\tlet leftThigh = new BodyPart('thigh-left');\n\t\thips.addChild(leftThigh);\n\n\t\t// let leftLeg = new BodyPart('leg-left');\n\t\t// leftThigh.addChild(leftLeg);\n\n\t\t// let leftFoot = new BodyPart('foot-left');\n\t\t// leftLeg.addChild(leftFoot);\n\n\n\t\t// let rightThigh = new BodyPart('thigh-right');\n\t\t// hips.addChild(rightThigh);\n\n\t\t// let rightLeg = new BodyPart('leg-right');\n\t\t// leftThigh.addChild(rightLeg);\n\n\t\t// let rightFoot = new BodyPart('foot-right');\n\t\t// rightLeg.addChild(rightFoot);\n\t}\n\n\tforEachPart(fn) {\n\t\t// TODO: build a queue of body parts, and run fn on them.\n\t\tvar explored = [];\n\t\tthis.queue.flush();\n\t\tthis.queue.push(this.root);\n\t\tfn(this.root, this.root.getName());\n\t\tvar currentPart;\n\n\t\twhile((currentPart = this.queue.pop()) !== undefined) {\n\t\t\tlet currentName = currentPart.getName();\n\t\t\tlet children = currentPart.getChildren();\n\n\t\t\tfor(let name in children) {\n\t\t\t\tlet child = children[name];\n\t\t\t\tif (!explored[name]) {\n\t\t\t\t\texplored[name] = true;\n\t\t\t\t\tfn(child, name);\n\t\t\t\t\tthis.queue.push(child);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.queue.flush();\n\t}\n\n\tloadAnimation(animObject) {\n\t\tthis.spritesheet = animObject.spritesheet;\n\t\tthis.duration = animObject.duration;\n\t\tthis.looping = animObject.looping;\n\n\t\tthis.forEachPart((part, name) => {\n\t\t\tif (!animObject.frames[name]) {\n\t\t\t\t//throw new Error(`No frame info for body part ${name} in animation object:`, animObject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tpart.loadAnimationInfo(this.duration, animObject.frames[name]);\n\t\t});\n\t}\n\n\tcalculateFrames() {\n\t\tthis.forEachPart((part) => {\n\t\t\tpart.calculateFrames();\n\t\t});\n\t}\n\n\tgetCalculatedFrames() {\n\t\tlet calculatedFrames = {};\n\t\tthis.forEachPart((part, name) => {\n\t\t\tcalculatedFrames[name] = part.getCalculatedFrames();\n\t\t});\n\t\treturn calculatedFrames;\n\t}\n}\n\nmodule.exports = Body;","let AnimationInfo = require('./animationInfo');\n\nclass BodyPart {\n\tconstructor(name) {\n\t\tthis.parent = null;\n\t\tthis.name = name;\n\t\tthis.children = {};\n\t\tthis.animationInfo = null;\n\t\tthis.calculatedFrames = {};\n\t\tthis.duration = 0;\n\t}\n\n\tsetParent(parent) {\n\t\tthis.parent = parent;\n\t}\n\n\t// Look into ES6 setters/getters\n\tgetParent() {\n\t\treturn this.parent;\n\t}\n\n\tgetName() {\n\t\treturn this.name;\n\t}\n\n\tgetChildren() {\n\t\treturn this.children;\n\t}\n\n\tgetChildByName(name) {\n\t\treturn this.children[name];\n\t}\n\n\taddChild(child) {\n\t\tlet childName = child.getName();\n\t\tchild.setParent(this);\n\t\tif (this.children[childName]) {\n\t\t\tlet existing = this.children[childName];\n\t\t\tlet parentChain = existing.getParentChainAsString()\n\t\t\tthrow new Error(`Cannot add child: '${this.name}' already has a child by the name of '${childName}': ${parentChain}`);\n\t\t}\n\t\tthis.children[childName] = child;\n\t}\n\n\tgetParentChainAsString() {\n\t\tlet stringParts = [];\n\t\tlet currentPart = this;\n\t\tdo {\n\t\t\tstringParts.unshift(currentPart.getName());\n\t\t} while (currentPart = currentPart.getParent());\n\n\t\treturn stringParts.join(' -> ');\n\t}\n\n\tgetAnimationInfo() {\n\t\treturn this.animationInfo;\n\t}\n\n\tloadAnimationInfo(duration, animationInfo) {\n\t\tthis.duration = duration;\n\t\tthis.animationInfo = new AnimationInfo(animationInfo);\n\t}\n\n\tgetCalculatedFrames() {\n\t\treturn this.calculatedFrames;\n\t}\n\n\tcalculateFrames() {\n\t\tfor(let f = 0; f < this.duration; f++) {\n\t\t\tlet rotation = this.animationInfo.getInterpolatedLocalRotation(f);\n\t\t\tlet position = this.animationInfo.getInterpolatedLocalPosition(f);\n\n\t\t\tlet parent = this.getParent();\n\t\t\tif (parent) {\n\t\t\t\tlet parentCalculatedFrames = parent.getCalculatedFrames();\n\n\t\t\t\trotation += parentCalculatedFrames[f].rotation;\n\n\t\t\t\t// TODO: implement real calculations here.\n\t\t\t\tposition[0] += parentCalculatedFrames[f].position[0];\n\t\t\t\tposition[1] += parentCalculatedFrames[f].position[1];\n\t\t\t}\n\n\t\t\tthis.calculatedFrames[f] = {\n\t\t\t\t'position': position,\n\t\t\t\t'rotation': rotation\n\t\t\t};\n\t\t}\n\t}\n\n\tgetDrawInfoForFrame(frameId) {\n\t\treturn {\n\t\t\t'position': this.calculatedFrames.position[frameId],\n\t\t\t'rotation': this.calculatedFrames.rotation[frameId]\n\t\t}\n\t}\n}\nmodule.exports = BodyPart;","class Queue {\n\tconstructor() {\n\t\tthis.arr = [];\n\t}\n\n\tpush(node) {\n\t\tthis.arr.push(node);\n\t}\n\n\tpop() {\n\t\treturn this.arr.shift();\n\t}\n\n\tflush() {\n\t\tthis.arr.length = 0;\n\t}\n}\nmodule.exports = Queue;"]}