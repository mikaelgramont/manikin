{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","src/scripts/app.js","src/scripts/body.js","src/scripts/bodypart.js","src/scripts/frameinfo.js","src/scripts/queue.js"],"names":[],"mappings":"AAAA;;;ACAA,IAAI,IAAI,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;AAE7B,IAAI,SAAS,GAAG,MAAM,CAAC,SAAS,CAAC;;AAEjC,IAAI,OAAO,GAAG,IAAI,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;AAC3C,OAAO,CAAC,aAAa,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;;AAE3C,OAAO,CAAC,WAAW,CAAC,UAAC,IAAI,EAAE,IAAI,EAAK;AACnC,QAAO,CAAC,GAAG,aAAU,IAAI,SAAK,IAAI,EAAE,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC;CACzD,CAAC,CAAC;;AAEH,IAAI,SAAS,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;AAC/C,IAAI,iBAAiB,GAAG;AACvB,OAAM,EAAE;AACP,YAAU,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;AAClB,YAAU,EAAE,CAAC;EACb;AACD,OAAM,EAAE;AACP,YAAU,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;AAClB,YAAU,EAAE,EAAE;EACd;AACD,QAAO,EAAE;AACR,YAAU,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;AAClB,YAAU,EAAE,EAAE;EACd;AACD,aAAY,EAAE;AACb,YAAU,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;AAClB,YAAU,EAAE,CAAC,CAAC;EACd;AACD,WAAU,EAAE;AACX,YAAU,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;AAClB,YAAU,EAAE,EAAE;EACd;AACD,WAAU,EAAE;AACX,YAAU,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;AAClB,YAAU,EAAE,EAAE;EACd;CACD,CAAC;;AAEF,KAAK,IAAI,QAAQ,IAAI,iBAAiB,EAAE;AACvC,KAAI,GAAG,GAAG,SAAS,CAAC,QAAQ,CAAC,CAAC;AAC9B,KAAI,QAAQ,GAAG,iBAAiB,CAAC,QAAQ,CAAC,CAAC;AAC3C,KAAI,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE;AACvF,SAAO,CAAC,KAAK,mBAAiB,QAAQ,0BAAuB,MAAM,EAAE,GAAG,CAAC,QAAQ,EAAE,WAAW,EAAE,QAAQ,CAAC,QAAQ,CAAC,CAAC;EACnH;AACD,KAAI,GAAG,CAAC,QAAQ,IAAI,QAAQ,CAAC,QAAQ,EAAE;AACtC,SAAO,CAAC,KAAK,mBAAiB,QAAQ,0BAAuB,MAAM,EAAE,GAAG,CAAC,QAAQ,EAAE,WAAW,EAAE,QAAQ,CAAC,QAAQ,CAAC,CAAC;EACnH;CACD;AACD,OAAO,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;;;;;;;;;ACjD5B,IAAI,QAAQ,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC;AACrC,IAAI,KAAK,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;;IAEzB,IAAI;AACE,UADN,IAAI,CACG,IAAI,EAAE,KAAK,EAAE;wBADpB,IAAI;;AAER,MAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AACjB,MAAI,CAAC,KAAK,GAAG,IAAI,KAAK,EAAE,CAAC;;;;AAIzB,MAAI,CAAC,IAAI,GAAG,IAAI,QAAQ,CAAC,MAAM,CAAC,CAAC;AACjC,MAAI,CAAC,WAAW,GAAG,IAAI,CAAC;AACxB,MAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;AACrB,MAAI,CAAC,OAAO,GAAG,IAAI,CAAC;AACpB,MAAI,CAAC,WAAW,EAAE,CAAC;EACnB;;cAZI,IAAI;;SAcE,uBAAG;AACb,OAAI,IAAI,GAAG,IAAI,QAAQ,CAAC,MAAM,CAAC,CAAC;AAChC,OAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;;AAEzB,OAAI,KAAK,GAAG,IAAI,QAAQ,CAAC,OAAO,CAAC,CAAC;AAClC,OAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;;;;;;;;AASrB,OAAI,OAAO,GAAG,IAAI,QAAQ,CAAC,UAAU,CAAC,CAAC;AACvC,QAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;;AAExB,OAAI,WAAW,GAAG,IAAI,QAAQ,CAAC,cAAc,CAAC,CAAC;AAC/C,UAAO,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;;;;;;;;;;;;;;AAgB9B,OAAI,SAAS,GAAG,IAAI,QAAQ,CAAC,YAAY,CAAC,CAAC;AAC3C,OAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;;;;;;;;;;;;;;;;GAiBzB;;;SAEU,qBAAC,EAAE,EAAE;;AAEf,OAAI,QAAQ,GAAG,EAAE,CAAC;AAClB,OAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;AACnB,OAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAC3B,KAAE,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;AACnC,OAAI,WAAW,CAAC;;AAEhB,UAAM,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,EAAE,CAAA,KAAM,SAAS,EAAE;AACrD,QAAI,WAAW,GAAG,WAAW,CAAC,OAAO,EAAE,CAAC;AACxC,QAAI,QAAQ,GAAG,WAAW,CAAC,WAAW,EAAE,CAAC;;AAEzC,SAAI,IAAI,KAAI,IAAI,QAAQ,EAAE;AACzB,SAAI,KAAK,GAAG,QAAQ,CAAC,KAAI,CAAC,CAAC;AAC3B,SAAI,CAAC,QAAQ,CAAC,KAAI,CAAC,EAAE;AACpB,cAAQ,CAAC,KAAI,CAAC,GAAG,IAAI,CAAC;AACtB,QAAE,CAAC,KAAK,EAAE,KAAI,CAAC,CAAC;AAChB,UAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;MACvB;KACD;IACD;AACD,OAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;GACnB;;;SAEY,uBAAC,UAAU,EAAE;AACzB,OAAI,CAAC,WAAW,GAAG,UAAU,CAAC,WAAW,CAAC;AAC1C,OAAI,CAAC,QAAQ,GAAG,UAAU,CAAC,QAAQ,CAAC;AACpC,OAAI,CAAC,OAAO,GAAG,UAAU,CAAC,OAAO,CAAC;AAClC,OAAI,CAAC,WAAW,CAAC,UAAC,IAAI,EAAE,IAAI,EAAK;AAChC,QAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE;;AAE7B,YAAO;KACP;;AAED,QAAI,CAAC,aAAa,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;IAC5C,CAAC,CAAC;GACH;;;SAEkB,6BAAC,OAAO,EAAE;AAC5B,OAAI,UAAU,GAAG,EAAE,CAAA;AACnB,OAAI,CAAC,WAAW,CAAC,UAAC,IAAI,EAAE,IAAI,EAAK;AAChC,cAAU,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,mBAAmB,CAAC,OAAO,CAAC,CAAC;IACrD,CAAC,CAAC;AACH,UAAO,UAAU,CAAC;GAClB;;;QAhHI,IAAI;;;AAmHV,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC;;;;;;;;;ACtHtB,IAAI,SAAS,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC;;IAEjC,QAAQ;AACF,UADN,QAAQ,CACD,IAAI,EAAE;wBADb,QAAQ;;AAEZ,MAAI,CAAC,MAAM,GAAG,IAAI,CAAC;AACnB,MAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AACjB,MAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;AACnB,MAAI,CAAC,SAAS,GAAG,IAAI,CAAC;EACtB;;cANI,QAAQ;;SAQJ,mBAAC,MAAM,EAAE;AACjB,OAAI,CAAC,MAAM,GAAG,MAAM,CAAC;GACrB;;;;;SAGQ,qBAAG;AACX,UAAO,IAAI,CAAC,MAAM,CAAC;GACnB;;;SAEM,mBAAG;AACT,UAAO,IAAI,CAAC,IAAI,CAAC;GACjB;;;SAEU,uBAAG;AACb,UAAO,IAAI,CAAC,QAAQ,CAAC;GACrB;;;SAEa,wBAAC,IAAI,EAAE;AACpB,UAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;GAC3B;;;SAEO,kBAAC,KAAK,EAAE;AACf,OAAI,SAAS,GAAG,KAAK,CAAC,OAAO,EAAE,CAAC;AAChC,QAAK,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;AACtB,OAAI,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE;AAC7B,QAAI,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;AACxC,QAAI,WAAW,GAAG,QAAQ,CAAC,sBAAsB,EAAE,CAAA;AACnD,UAAM,IAAI,KAAK,0BAAuB,IAAI,CAAC,IAAI,gDAAyC,SAAS,YAAM,WAAW,CAAG,CAAC;IACtH;AACD,OAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,GAAG,KAAK,CAAC;GACjC;;;SAEqB,kCAAG;AACxB,OAAI,WAAW,GAAG,EAAE,CAAC;AACrB,OAAI,WAAW,GAAG,IAAI,CAAC;AACvB,MAAG;AACF,eAAW,CAAC,OAAO,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC,CAAC;IAC3C,QAAQ,WAAW,GAAG,WAAW,CAAC,SAAS,EAAE,EAAE;;AAEhD,UAAO,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;GAChC;;;SAEY,uBAAC,IAAI,EAAE;AACnB,OAAI,CAAC,SAAS,GAAG,IAAI,SAAS,CAAC,IAAI,CAAC,CAAC;GACrC;;;SAEW,wBAAG;AACd,UAAO,IAAI,CAAC,SAAS,CAAC;GACtB;;;SAEkB,6BAAC,OAAO,EAAE;AAC5B,UAAO;AACN,cAAU,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;AAClB,cAAU,EAAE,CAAC;IACb,CAAA;GACD;;;QA/DI,QAAQ;;;AAiEd,MAAM,CAAC,OAAO,GAAG,QAAQ,CAAC;;;;;;;ICnEpB,SAAS,GACH,SADN,SAAS,CACF,IAAI,EAAE;uBADb,SAAS;;;;AAIb,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;CAC9B;;AAGF,MAAM,CAAC,OAAO,GAAG,SAAS,CAAC;;;;;;;;;ICRrB,KAAK;AACC,UADN,KAAK,GACI;wBADT,KAAK;;AAET,MAAI,CAAC,GAAG,GAAG,EAAE,CAAC;EACd;;cAHI,KAAK;;SAKN,cAAC,IAAI,EAAE;AACV,OAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;GACpB;;;SAEE,eAAG;AACL,UAAO,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC;GACxB;;;SAEI,iBAAG;AACP,OAAI,CAAC,GAAG,CAAC,MAAM,GAAG,CAAC,CAAC;GACpB;;;QAfI,KAAK;;;AAiBX,MAAM,CAAC,OAAO,GAAG,KAAK,CAAC","file":"app.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","let Body = require('./body');\n\nlet appConfig = window.appConfig;\n\nlet manikin = new Body(appConfig.bodyName);\nmanikin.loadAnimation(appConfig.animation);\n\nmanikin.forEachPart((part, name) => {\n\tconsole.log(`Part '${name}'`, part, part.getFrameInfo());\n});\n\nvar frameInfo = manikin.getDrawInfoForFrame(0);\nvar expectedFrameInfo = {\n\t'root': {\n\t\t'position': [3, 5],\n\t\t'rotation': 0\n\t},\n\t'hips': {\n\t\t'position': [0, 0],\n\t\t'rotation': 20\n\t},\n\t'torso': {\n\t\t'position': [0, 0],\n\t\t'rotation': 20\n\t},\t\n\t'thigh-left': {\n\t\t'position': [0, 0],\n\t\t'rotation': -5\n\t},\n\t'arm-left': {\n\t\t'position': [0, 0],\n\t\t'rotation': 35\n\t},\n\t'arm-left': {\n\t\t'position': [0, 0],\n\t\t'rotation': 80\n\t},\n};\n\nfor (let partName in expectedFrameInfo) {\n\tlet got = frameInfo[partName];\n\tlet expected = expectedFrameInfo[partName];\n\tif (got.position[0] != expected.position[0] || got.position[1] != expected.position[1]) {\n\t\tconsole.error(`Position for ${partName} does is incorrect.`, 'Got:', got.position, 'expected:', expected.position);\n\t}\n\tif (got.rotation != expected.rotation) {\n\t\tconsole.error(`Rotation for ${partName} does is incorrect.`, 'Got:', got.rotation, 'expected:', expected.rotation);\n\t}\n}\nconsole.log('Done testing');","let BodyPart = require('./bodypart');\nlet Queue = require('./queue');\n\nclass Body {\n\tconstructor(name, queue) {\n\t\tthis.name = name;\n\t\tthis.queue = new Queue();\n\n\t\t// TODO: create a frame information object to pass around\n\n\t\tthis.root = new BodyPart('root');\n\t\tthis.spritesheet = null;\n\t\tthis.duration = null;\n\t\tthis.looping = null;\n\t\tthis.createParts();\n\t}\n\n\tcreateParts() {\n\t\tlet hips = new BodyPart('hips');\n\t\tthis.root.addChild(hips);\n\n\t\tlet torso = new BodyPart('torso');\n\t\thips.addChild(torso);\n\n\t\t// let neck = new BodyPart('neck');\n\t\t// torso.addChild(neck);\n\n\t\t// let head = new BodyPart('head');\n\t\t// neck.addChild(head);\n\n\n\t\tlet leftArm = new BodyPart('arm-left');\n\t\ttorso.addChild(leftArm);\n\n\t\tlet leftForeArm = new BodyPart('forearm-left');\n\t\tleftArm.addChild(leftForeArm);\n\n\t\t// let leftHand = new BodyPart('hand-left');\n\t\t// leftForeArm.addChild(leftHand);\n\n\n\t\t// let rightArm = new BodyPart('arm-right');\n\t\t// torso.addChild(rightArm);\n\n\t\t// let rightForeArm = new BodyPart('forearm-right');\n\t\t// rightArm.addChild(rightForeArm);\n\n\t\t// let rightHand = new BodyPart('hand-right');\n\t\t// rightForeArm.addChild(rightHand);\n\n\n\t\tlet leftThigh = new BodyPart('thigh-left');\n\t\thips.addChild(leftThigh);\n\n\t\t// let leftLeg = new BodyPart('leg-left');\n\t\t// leftThigh.addChild(leftLeg);\n\n\t\t// let leftFoot = new BodyPart('foot-left');\n\t\t// leftLeg.addChild(leftFoot);\n\n\n\t\t// let rightThigh = new BodyPart('thigh-right');\n\t\t// hips.addChild(rightThigh);\n\n\t\t// let rightLeg = new BodyPart('leg-right');\n\t\t// leftThigh.addChild(rightLeg);\n\n\t\t// let rightFoot = new BodyPart('foot-right');\n\t\t// rightLeg.addChild(rightFoot);\n\t}\n\n\tforEachPart(fn) {\n\t\t// TODO: build a queue of body parts, and run fn on them.\n\t\tvar explored = [];\n\t\tthis.queue.flush();\n\t\tthis.queue.push(this.root);\n\t\tfn(this.root, this.root.getName());\n\t\tvar currentPart;\n\n\t\twhile((currentPart = this.queue.pop()) !== undefined) {\n\t\t\tlet currentName = currentPart.getName();\n\t\t\tlet children = currentPart.getChildren();\n\n\t\t\tfor(let name in children) {\n\t\t\t\tlet child = children[name];\n\t\t\t\tif (!explored[name]) {\n\t\t\t\t\texplored[name] = true;\n\t\t\t\t\tfn(child, name);\n\t\t\t\t\tthis.queue.push(child);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.queue.flush();\n\t}\n\n\tloadAnimation(animObject) {\n\t\tthis.spritesheet = animObject.spritesheet;\n\t\tthis.duration = animObject.duration;\n\t\tthis.looping = animObject.looping;\n\t\tthis.forEachPart((part, name) => {\n\t\t\tif (!animObject.frames[name]) {\n\t\t\t\t//throw new Error(`No frame info for body part ${name} in animation object:`, animObject);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tpart.loadFrameInfo(animObject.frames[name]);\n\t\t});\n\t}\n\n\tgetDrawInfoForFrame(frameId) {\n\t\tlet calculated = {}\n\t\tthis.forEachPart((part, name) => {\n\t\t\tcalculated[name] = part.getDrawInfoForFrame(frameId);\n\t\t});\n\t\treturn calculated;\n\t}\n}\n\nmodule.exports = Body;","let FrameInfo = require('./frameinfo');\n\nclass BodyPart {\n\tconstructor(name) {\n\t\tthis.parent = null;\n\t\tthis.name = name;\n\t\tthis.children = {};\n\t\tthis.frameInfo = null;\n\t}\n\n\tsetParent(parent) {\n\t\tthis.parent = parent;\n\t}\n\n\t// Look into ES6 setters/getters\n\tgetParent() {\n\t\treturn this.parent;\n\t}\n\n\tgetName() {\n\t\treturn this.name;\n\t}\n\n\tgetChildren() {\n\t\treturn this.children;\n\t}\n\n\tgetChildByName(name) {\n\t\treturn this.children[name];\n\t}\n\n\taddChild(child) {\n\t\tlet childName = child.getName();\n\t\tchild.setParent(this);\n\t\tif (this.children[childName]) {\n\t\t\tlet existing = this.children[childName];\n\t\t\tlet parentChain = existing.getParentChainAsString()\n\t\t\tthrow new Error(`Cannot add child: '${this.name}' already has a child by the name of '${childName}': ${parentChain}`);\n\t\t}\n\t\tthis.children[childName] = child;\n\t}\n\n\tgetParentChainAsString() {\n\t\tlet stringParts = [];\n\t\tlet currentPart = this;\n\t\tdo {\n\t\t\tstringParts.unshift(currentPart.getName());\n\t\t} while (currentPart = currentPart.getParent());\n\n\t\treturn stringParts.join(' -> ');\n\t}\n\n\tloadFrameInfo(info) {\n\t\tthis.frameInfo = new FrameInfo(info);\n\t}\n\n\tgetFrameInfo() {\n\t\treturn this.frameInfo;\n\t}\n\n\tgetDrawInfoForFrame(frameId) {\n\t\treturn {\n\t\t\t'position': [0, 0],\n\t\t\t'rotation': 0\n\t\t}\n\t}\n}\nmodule.exports = BodyPart;","class FrameInfo {\n\tconstructor(info) {\n\t\t// this.source = info.source;\n\t\t// this.center = info.center;\n\t\tthis.rotation = info.rotation;\n\t}\n}\n\nmodule.exports = FrameInfo;","class Queue {\n\tconstructor() {\n\t\tthis.arr = [];\n\t}\n\n\tpush(node) {\n\t\tthis.arr.push(node);\n\t}\n\n\tpop() {\n\t\treturn this.arr.shift();\n\t}\n\n\tflush() {\n\t\tthis.arr.length = 0;\n\t}\n}\nmodule.exports = Queue;"]}